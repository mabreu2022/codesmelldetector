<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="utf-8">
  <title>DocumentaÃ§Ã£o - CodeSmellDetector</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 40px; background: #f9f9f9; color: #333; }
    h1, h2 { color: #2c3e50; }
    code { background: #eee; padding: 2px 4px; border-radius: 4px; }
    pre { background: #f0f0f0; padding: 10px; border-radius: 6px; overflow-x: auto; }
    table { border-collapse: collapse; width: 100%; margin-top: 20px; }
    th, td { border: 1px solid #ccc; padding: 8px; text-align: left; }
    th { background: #e0e0e0; }
    ul { margin-top: 0; }
  </style>
</head>
<body>

<h1>ğŸ“˜ CodeSmellDetector</h1>
<p>Ferramenta de anÃ¡lise estÃ¡tica e refatoraÃ§Ã£o assistida para projetos Delphi. Detecta mÃ©todos longos, gera sugestÃµes de melhoria com IA local e mantÃ©m os arquivos originais seguros.</p>

<h2>ğŸš€ Funcionalidades principais</h2>
<ul>
  <li>CriaÃ§Ã£o automÃ¡tica de cÃ³pia temporÃ¡ria do projeto para anÃ¡lise segura</li>
  <li>ConversÃ£o de arquivos para UTF-8 sem BOM (sem sujeira antes de <code>unit</code>)</li>
  <li>Backup automÃ¡tico dos arquivos antes de qualquer modificaÃ§Ã£o</li>
  <li>DetecÃ§Ã£o de mÃ©todos longos e estruturas complexas</li>
  <li>GeraÃ§Ã£o de sugestÃµes de refatoraÃ§Ã£o com IA local (via HTTP)</li>
  <li>RelatÃ³rios em HTML, CSV e JSON</li>
  <li>ReversÃ£o completa de alteraÃ§Ãµes com um Ãºnico comando</li>
</ul>

<h2>ğŸ§¾ Comandos aceitos</h2>
<table>
  <tr>
    <th>Comando</th>
    <th>DescriÃ§Ã£o</th>
  </tr>
  <tr>
    <td><code>CodeSmellDetector &lt;pasta_do_projeto&gt;</code></td>
    <td>Executa a anÃ¡lise completa do projeto informado. Nenhum arquivo original Ã© alterado.</td>
  </tr>
  <tr>
    <td><code>CodeSmellDetector --reverter &lt;pasta_do_projeto&gt;</code></td>
    <td>Restaura os arquivos originais a partir do backup salvo em <code>.backup_CodeSmell</code>.</td>
  </tr>
  <tr>
    <td><code>CodeSmellDetector &lt;pasta&gt; --silencioso</code></td>
    <td>Executa a anÃ¡lise sem exibir logs no console (apenas grava no arquivo de log).</td>
  </tr>
</table>

<h2>ğŸ“ Estrutura de diretÃ³rios</h2>
<pre>
C:\Projetos\MeuApp\
â”œâ”€â”€ .backup_CodeSmell\       â† Backup automÃ¡tico dos arquivos originais
â”œâ”€â”€ relatorios\              â† RelatÃ³rios e sugestÃµes geradas
â”‚   â”œâ”€â”€ sugestoes_html\
â”‚   â”œâ”€â”€ sugestoes_csv\
â”‚   â””â”€â”€ sugestoes_json\
â””â”€â”€ src\                     â† CÃ³digo-fonte original (inalterado)
</pre>

<h2>ğŸ§  Detalhes tÃ©cnicos</h2>
<ul>
  <li>Arquivos maiores que 5 MB sÃ£o ignorados automaticamente</li>
  <li>Leitura de arquivos feita linha a linha com <code>TStreamReader</code> para economia de memÃ³ria</li>
  <li>Limite de 4 tarefas paralelas para geraÃ§Ã£o de sugestÃµes</li>
  <li>IA local chamada via HTTP em <code>http://localhost:11434/api/generate</code></li>
  <li>Timeout configurado para 5 minutos por requisiÃ§Ã£o</li>
  <li>Respostas da IA sÃ£o cacheadas por hash MD5 do mÃ©todo</li>
  <li>RelatÃ³rios HTML sÃ£o salvos como UTF-8 sem BOM para compatibilidade com navegadores</li>
</ul>

<h2>ğŸ“¤ Exemplo de uso</h2>
<pre>
CodeSmellDetector C:\Projetos\MeuApp
</pre>

<h2>ğŸ” Exemplo de reversÃ£o</h2>
<pre>
CodeSmellDetector --reverter C:\Projetos\MeuApp
</pre>

<h2>ğŸ“Œ Requisitos</h2>
<ul>
  <li>Delphi XE ou superior</li>
  <li>Projeto Delphi com arquivos .pas, .dpr, .dfm, .inc</li>
  <li>Servidor de IA local rodando em <code>localhost:11434</code></li>
</ul>

</body>
</html>